# Git workflow (short)

- Branch from `main`, name like `feat/<slug>` or `fix/<slug>`.
- Keep PRs small and focused. Add tests.
- Squash merge to `main`.

## Tools

- Conventional Commits enforced via Commitizen (`cz`). See `pyproject.toml`.
- Pre-commit hooks: ruff (lint + format), pyupgrade, codespell, yaml checks, bandit.
- Install hooks: `make pre-commit-install`; run all hooks: `make pre-commit-run`.

## Conventional Commits

Format: `<type>(<scope>): <description>`

Common types: `feat`, `fix`, `docs`, `refactor`, `perf`, `test`, `chore`.

Examples:

```bash
feat(api): add conversation history endpoint
fix(ingestion): handle empty PDFs gracefully
docs(readme): simplify setup steps
```

## Typical flow

```bash
git checkout -b feat/add-redis-caching
# code
make test && make lint
# optional: run pre-commit on staged files
pre-commit run
git commit -m "feat(core): add shared redis client"
git push -u origin feat/add-redis-caching
# open PR → review → squash merge

# validate commits and version bump (maintainers)
make cz-check
make cz-bump

## PR checklist

Follow `.github/PULL_REQUEST_TEMPLATE.md` and see `.github/CURSOR_RULES.md`.
```
